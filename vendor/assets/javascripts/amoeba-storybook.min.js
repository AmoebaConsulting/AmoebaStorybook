/*! amoeba-storybook - v0.1.1 - 2013-02-07
* Copyright (c) 2013 ; Licensed  */
(function(){var e;(e=window.AmoebaSB)==null&&(window.AmoebaSB={}),jQuery(function(e){return AmoebaSB.eventHelper=new AmoebaSB.EventHelper})}).call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};AmoebaSB.EventHelper=function(){function t(){this._handleKeyEvent=e(this._handleKeyEvent,this),this._setupKeyHandler=e(this._setupKeyHandler,this),this.triggerEvent=e(this.triggerEvent,this),this._setupKeyHandler(),this.nextKeyEventName="next:keyEvent",this.prevKeyEventName="prev:keyEvent",this.resizeEventName="resize:windowEvent"}return t.prototype.triggerEvent=function(e,t,n){var r;return r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)},t.prototype._setupKeyHandler=function(){var e=this;return document.addEventListener("keydown",function(t){return e._handleKeyEvent(t)}),document.addEventListener("keyup",function(t){return e._handleKeyEvent(t)}),document.addEventListener("touchstart",function(t){var n,r;if(t.touches.length===1){r=t.touches[0].clientX,n=window.innerWidth*.3;if(r<n)return e.triggerEvent(document,e.prevKeyEventName),t.preventDefault();if(r>window.innerWidth-n)return e.triggerEvent(document,e.nextKeyEventName),t.preventDefault()}}),window.addEventListener("resize",function(t){if(!e.sentReizeEvent)return e.sentResizeEvent=!0,setTimeout(function(){return e.triggerEvent(document,e.resizeEventName),e.sentResizeEvent=!1},250)})},t.prototype._handleKeyEvent=function(e){var t,n,r,i,s,o,u;o=9,s=32,n=37,u=38,r=39,t=40,i=!1,e.type==="keyup"&&(i=!0);switch(e.keyCode){case o:case t:case r:case s:e.preventDefault();if(i)return this.triggerEvent(document,this.nextKeyEventName);break;case n:case u:e.preventDefault();if(i)return this.triggerEvent(document,this.prevKeyEventName)}},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};AmoebaSB.GraphicsPaper=function(){function t(t,n){this.divHolder=t,this._fadePoint=e(this._fadePoint,this),this.clearPoints=e(this.clearPoints,this),this.clearAll=e(this.clearAll,this),this.pulsatePoints=e(this.pulsatePoints,this),n==null&&(n={fill:"90-#aaf-#004",stroke:"#f99"}),this.paper=Raphael(this.divHolder),this.paper.rect(0,0,this.width(),this.height()).attr(n),this.points=[]}return t.prototype.width=function(){return this.paper.canvas.clientWidth?this.paper.canvas.clientWidth:this.paper.width},t.prototype.height=function(){return this.paper.canvas.clientHeight?this.paper.canvas.clientHeight:this.paper.height},t.prototype.addPoints=function(e,t,n){var r=this;return n==null&&(n="#f00"),_.each(e,function(e){var i;return i=r.paper.circle(e.x,e.y,t),i.attr({fill:n,stroke:"none"}),r.points.push(i)})},t.prototype.pulsatePoints=function(){var e=this;return _.each(this.points,function(t){return e._fadePoint(!0,t)})},t.prototype.clearAll=function(){return this.paper.clear()},t.prototype.clearPoints=function(){var e=this;return _.each(this.points,function(e){return e.remove()})},t.prototype._fadePoint=function(e,t){var n,r,i=this;return r=Raphael.animation({transform:"s2",opacity:1},600,"<",function(){return i._fadePoint(!e,t)}),n=Raphael.animation({transform:"s1",opacity:.1},600,">",function(){return i._fadePoint(!e,t)}),t.stop(),e?t.animate(r):t.animate(n)},t}(),AmoebaSB.Point=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e.prototype.distance=function(e){var t,n;return t=e.x-this.x,t*=t,n=e.y-this.y,n*=n,Math.sqrt(t+n)},e}(),AmoebaSB.Pair=function(){function e(e,t){this.left=e,this.right=t}return e.prototype.toString=function(){return"("+this.left+", "+this.right+")"},e}(),AmoebaSB.Rect=function(){function e(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}return e.prototype.toString=function(){return"(x:"+this.x+", y:"+this.y+", w:"+this.w+", h:"+this.h+")"},e}(),AmoebaSB.Graphics=function(){function e(){}return e.toDegrees=function(e){return e*(180/Math.PI)},e.toRadians=function(e){return e*(Math.PI/180)},e.pointForAngle=function(e,t,n){var r,i;return r=Math.cos(AmoebaSB.Graphics.toRadians(e)),i=Math.sin(AmoebaSB.Graphics.toRadians(e)),new AmoebaSB.Point(n.x+r*t,n.y+i*t)},e.normalizePath=function(e){var t,n,r;return t=Raphael.pathBBox(e),n=new Raphael.matrix,n.translate(-t.x,-t.y),r=n.toTransformString(),e=Raphael.transformPath(e,r),e},e.scalePath=function(e,t,n){var r,i;return r=new Raphael.matrix,r.scale(t,n),i=r.toTransformString(),e=Raphael.transformPath(e,i),e},e.translatePath=function(e,t,n){var r,i;return r=new Raphael.matrix,r.translate(t,n),i=r.toTransformString(),e=Raphael.transformPath(e,i),e},e.rotatePath=function(e,t){var n,r,i;return n=Raphael.pathBBox(e),r=new Raphael.matrix,r.rotate(t,n.x+n.width/2,n.y+n.height/2),i=r.toTransformString(),e=Raphael.transformPath(e,i),e},e.circleWithFourPoints=function(e,t,n){var r,i,s=this;return r=new AmoebaSB.Point(e,t),i=void 0,_.each([0,90,180,270,360],function(o){var u;return u=s.pointForAngle(o,n,r),i!=null?i+="A"+n+","+n+",0,0,1,"+u.x+","+u.y:i="M"+(e+n)+", "+t}),i!=null&&(i+="z",i=this.rotatePath(i,-135)),i},e.rectWithFourPoints=function(e,t,n,r){var i;return i="M"+e+", "+t,i+="l"+n+", 0",i+="l0, "+r,i+="l"+ -n+", 0",i+="l0, "+ -r,i},e.trianglePath=function(e,t,n,r,i,s){var o;return o="M"+e+","+t,o+="L"+n+","+r,o+="L"+i+","+s,o},e}()}.call(this),function(){}.call(this);